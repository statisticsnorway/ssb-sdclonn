<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Output fra sdc_lonn omgjort til langformat — long_sdclonn • sdclonn</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Output fra sdc_lonn omgjort til langformat — long_sdclonn"><meta name="description" content="Eksempler inkluderer omkoding med recode."><meta property="og:description" content="Eksempler inkluderer omkoding med recode."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sdclonn</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-sdclonn/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Output fra <code>sdc_lonn</code> omgjort til langformat</h1>
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-sdclonn/blob/main/R/long_sdclonn.R" class="external-link"><code>R/long_sdclonn.R</code></a></small>
      <div class="d-none name"><code>long_sdclonn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Eksempler inkluderer omkoding med <code><a href="recode.html">recode</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">long_sdclonn</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  prikket <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  long <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  statvar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"manedslonn"</span>, <span class="st">"avtalt"</span>, <span class="st">"bonus"</span>, <span class="st">"uregtil"</span>, <span class="st">"overtid"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>output fra <code><a href="sdc_lonn.html">sdc_lonn</a></code></p></dd>


<dt id="arg-prikket">prikket<a class="anchor" aria-label="anchor" href="#arg-prikket"></a></dt>
<dd><p>Prikkede tall i output ved <code>TRUE</code>. Prikkede tall er missing (<code>NA</code>).</p></dd>


<dt id="arg-long">long<a class="anchor" aria-label="anchor" href="#arg-long"></a></dt>
<dd><p>langformat ved <code>TRUE</code>. Ved <code>FALSE</code> returneres en versjon forberedt dataene.</p></dd>


<dt id="arg-statvar">statvar<a class="anchor" aria-label="anchor" href="#arg-statvar"></a></dt>
<dd><p>Kategorinavn som er del av variabelnavn i input og som vil finnes i variabelen <code>statvar</code> i output.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data i langformat</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Funksjonen <code>long_sdclonn</code> er ment for å lage data på format som trengs i statistikkbanken.
Men den lager ikke de endelige variabelnavn og koder som trengs.</p>
<p>Ytterligere omkoding kan gjøres på flere måter.
I eksemplene her vises det hvordan det kan gjøres med funksjonen <code><a href="recode.html">recode</a></code> som nå er innebygget i denne pakken.
Det kan uansett være problem med de norske bokstavene.
Dette avhenger kanskje av plattformen dette kjøres på.
Norske bokstaver unngås i eksemplene.</p>
<p>Ved kjøring av <code>long_sdclonn</code>-funksjonen så vil det bli vil det bli mange "kopi-rader" med antall
arbeidsforhold og antall heltidsekvivalenter.
Dette fordi disse variablene blir satt sammen med de ulike statistikkvariablene.
Dersom det av en eller annen grunn skjer at andre variabler feilkodes kan flere variabler bli «kopiert» til mange rader.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="sdclonn_data.html">sdclonn_data</a></span><span class="op">(</span><span class="st">"syntetisk_5000"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="sdc_lonn.html">sdc_lonn</a></span><span class="op">(</span><span class="va">a</span>,  between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yrke1"</span>, <span class="st">"yrke2"</span>, <span class="st">"sektor3"</span><span class="op">)</span>,  </span></span>
<span class="r-in"><span>                within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pers_kjoenn"</span>, <span class="st">"arb_heldeltid"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                k1 <span class="op">=</span> <span class="fl">80</span>, k2 <span class="op">=</span> <span class="fl">85</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 5000*39-&gt;5006*40] [pre_aggregate 5006*41-&gt;160*15] [ModelMatrix] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [dummy_aggregate.........................] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum_numttH: .........................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum_numttH: .........................</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Lager data i langformat  </span></span></span>
<span class="r-in"><span><span class="va">long1</span> <span class="op">&lt;-</span> <span class="fu">long_sdclonn</span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Legger inn nye koder for kategorier i to trinn </span></span></span>
<span class="r-in"><span><span class="va">long2</span> <span class="op">&lt;-</span> <span class="fu"><a href="recode.html">recode</a></span><span class="op">(</span><span class="va">long1</span>, </span></span>
<span class="r-in"><span>                old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"manedslonn"</span>, <span class="st">"avtalt"</span>, <span class="st">"bonus"</span>, <span class="st">"uregtil"</span>, <span class="st">"overtid"</span><span class="op">)</span>,  </span></span>
<span class="r-in"><span>                new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Manedslonn"</span>, <span class="st">"Avtalt manedslonn"</span>, <span class="st">"Bonus"</span>, <span class="st">"Uregelmessige tillegg"</span>, </span></span>
<span class="r-in"><span>                        <span class="st">"Overtidsgodtgjorelse"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                oldvar <span class="op">=</span> <span class="st">"statvar"</span>, </span></span>
<span class="r-in"><span>                newvar <span class="op">=</span> <span class="st">"statistikkvariabel"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">long3</span> <span class="op">&lt;-</span> <span class="fu"><a href="recode.html">recode</a></span><span class="op">(</span><span class="va">long2</span>, </span></span>
<span class="r-in"><span>                old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gjennomsnitt"</span>, <span class="st">"median"</span>, <span class="st">"nedre_kvartil"</span>, <span class="st">"Ovre_kvartil"</span>, </span></span>
<span class="r-in"><span>                        <span class="st">"antall_arbeidsforhold"</span>, <span class="st">"antall_heltidsekvivalenter"</span><span class="op">)</span>,  </span></span>
<span class="r-in"><span>                new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gjennomsnitt"</span>, <span class="st">"Median"</span>, <span class="st">"Nedre kvartil"</span>, <span class="st">"Ovre kvartil"</span>, </span></span>
<span class="r-in"><span>                        <span class="st">"Antall arbeidsforhold med lonn"</span>, <span class="st">"Antall heltidsekvivalenter"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                oldvar <span class="op">=</span> <span class="st">"statmal"</span>, </span></span>
<span class="r-in"><span>                newvar <span class="op">=</span> <span class="st">"statistikkmal"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">long3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   yrke2 sektor3 pers_kjoenn arb_heldeltid    statvar      statmal    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Total   Total       Total         Total manedslonn gjennomsnitt 43767.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Total   Total       Total             1 manedslonn gjennomsnitt 43920.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Total   Total       Total             2 manedslonn gjennomsnitt 43212.23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Total   Total           1         Total manedslonn gjennomsnitt 43333.07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Total   Total           1             1 manedslonn gjennomsnitt 43582.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Total   Total           1             2 manedslonn gjennomsnitt 42506.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   statistikkvariabel statistikkmal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         Manedslonn  Gjennomsnitt</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Viser alternativ metode der long blir det samme som long3.</span></span></span>
<span class="r-in"><span><span class="co"># Her brukes pipeoperatoren, |&gt; , som tilsvarer %&gt;% i tidyverse.</span></span></span>
<span class="r-in"><span><span class="co"># |&gt; er relativt ny i base R. Brukes denne istedenfor %&gt;% behoves ikke ekstra pakker. </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">statvar_koder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"manedslonn"</span>, <span class="st">"avtalt"</span>, <span class="st">"bonus"</span>, <span class="st">"uregtil"</span>, <span class="st">"overtid"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">statistikkvariabel_koder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Manedslonn"</span>, <span class="st">"Avtalt manedslonn"</span>, <span class="st">"Bonus"</span>, </span></span>
<span class="r-in"><span>                              <span class="st">"Uregelmessige tillegg"</span>, <span class="st">"Overtidsgodtgjorelse"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">statmal_koder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gjennomsnitt"</span>, <span class="st">"median"</span>, <span class="st">"nedre_kvartil"</span>, <span class="st">"Ovre_kvartil"</span>, </span></span>
<span class="r-in"><span>                   <span class="st">"antall_arbeidsforhold"</span>, <span class="st">"antall_heltidsekvivalenter"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">statistikkmal_koder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gjennomsnitt"</span>, <span class="st">"Median"</span>, <span class="st">"Nedre kvartil"</span>, <span class="st">"Ovre kvartil"</span>, </span></span>
<span class="r-in"><span>                         <span class="st">"Antall arbeidsforhold med lonn"</span>, <span class="st">"Antall heltidsekvivalenter"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">long</span> <span class="op">&lt;-</span> <span class="fu"><a href="sdclonn_data.html">sdclonn_data</a></span><span class="op">(</span><span class="st">"syntetisk_5000"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu"><a href="sdc_lonn.html">sdc_lonn</a></span><span class="op">(</span>between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yrke1"</span>, <span class="st">"yrke2"</span>, <span class="st">"sektor3"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>         within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pers_kjoenn"</span>, <span class="st">"arb_heldeltid"</span><span class="op">)</span>, k1 <span class="op">=</span> <span class="fl">80</span>, k2 <span class="op">=</span> <span class="fl">85</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">long_sdclonn</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="recode.html">recode</a></span><span class="op">(</span>old <span class="op">=</span> <span class="va">statvar_koder</span>, new <span class="op">=</span> <span class="va">statistikkvariabel_koder</span>, </span></span>
<span class="r-in"><span>         oldvar <span class="op">=</span> <span class="st">"statvar"</span>, newvar <span class="op">=</span> <span class="st">"statistikkvariabel"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="recode.html">recode</a></span><span class="op">(</span>old <span class="op">=</span> <span class="va">statmal_koder</span>, new <span class="op">=</span> <span class="va">statistikkmal_koder</span>, </span></span>
<span class="r-in"><span>         oldvar <span class="op">=</span> <span class="st">"statmal"</span>, newvar <span class="op">=</span> <span class="st">"statistikkmal"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 5000*39-&gt;5006*40] [pre_aggregate 5006*41-&gt;160*15] [ModelMatrix] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [dummy_aggregate.........................] </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum_numttH: .........................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum_numttH: .........................</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">long</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   yrke2 sektor3 pers_kjoenn arb_heldeltid    statvar      statmal    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Total   Total       Total         Total manedslonn gjennomsnitt 43767.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Total   Total       Total             1 manedslonn gjennomsnitt 43920.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Total   Total       Total             2 manedslonn gjennomsnitt 43212.23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Total   Total           1         Total manedslonn gjennomsnitt 43333.07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Total   Total           1             1 manedslonn gjennomsnitt 43582.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Total   Total           1             2 manedslonn gjennomsnitt 42506.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   statistikkvariabel statistikkmal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         Manedslonn  Gjennomsnitt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         Manedslonn  Gjennomsnitt</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

