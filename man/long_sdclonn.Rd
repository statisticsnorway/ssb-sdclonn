% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/long_sdclonn.R
\name{long_sdclonn}
\alias{long_sdclonn}
\title{Output fra \code{sdc_lonn} omgjort til langformat}
\usage{
long_sdclonn(
  data,
  prikket = TRUE,
  long = TRUE,
  statvar = c("manedslonn", "avtalt", "bonus", "uregtil", "overtid")
)
}
\arguments{
\item{data}{output fra \code{\link{sdc_lonn}}}

\item{prikket}{Prikkede tall i output ved \code{TRUE}. Prikkede tall er missing (\code{NA}).}

\item{long}{langformat ved \code{TRUE}. Ved \code{FALSE} returneres en versjon forberedt dataene.}

\item{statvar}{Kategorinavn som er del av variabelnavn i input og som vil finnes i variabelen \code{statvar} i output.}
}
\value{
data i langformat
}
\description{
Eksempler inkluderer omkoding med \code{\link{recode}}.
}
\details{
Funksjonen \code{\link{long_sdclonn}} er ment for å lage data på format som trengs i statistikkbanken.
Men den lager ikke de endelige variabelnavn og koder som trengs.

Ytterligere omkoding kan gjøres på flere måter.
I eksemplene her vises det hvordan det kan gjøres med funksjonen \code{\link{recode}} som nå er innebygget i denne pakken.
Det kan uansett være problem med de norske bokstavene.
Dette avhenger kanskje av plattformen dette kjøres på.
Norske bokstaver unngås i eksemplene.

Ved kjøring av \code{\link{long_sdclonn}}-funksjonen så vil det bli vil det bli mange "kopi-rader" med antall
arbeidsforhold og antall heltidsekvivalenter.
Dette fordi disse variablene blir satt sammen med de ulike statistikkvariablene.
Dersom det av en eller annen grunn skjer at andre variabler feilkodes kan flere variabler bli «kopiert» til mange rader.
}
\examples{
a <- sdclonn_data("syntetisk_5000")
out <- sdc_lonn(a,  between = c("yrke1", "yrke2", "sektor3"),  
                within = c("pers_kjoenn", "arb_heldeltid"), 
                k1 = 80, k2 = 85)

# Lager data i langformat  
long1 <- long_sdclonn(out)

# Legger inn nye koder for kategorier i to trinn 
long2 <- recode(long1, 
                old = c("manedslonn", "avtalt", "bonus", "uregtil", "overtid"),  
                new = c("Manedslonn", "Avtalt manedslonn", "Bonus", "Uregelmessige tillegg", 
                        "Overtidsgodtgjorelse"), 
                oldvar = "statvar", 
                newvar = "statistikkvariabel")
long3 <- recode(long2, 
                old = c("gjennomsnitt", "median", "nedre_kvartil", "Ovre_kvartil", 
                        "antall_arbeidsforhold", "antall_heltidsekvivalenter"),  
                new = c("Gjennomsnitt", "Median", "Nedre kvartil", "Ovre kvartil", 
                        "Antall arbeidsforhold med lonn", "Antall heltidsekvivalenter"),
                oldvar = "statmal", 
                newvar = "statistikkmal")
head(long3)


# Viser alternativ metode der long blir det samme som long3.
# Her brukes pipeoperatoren, |> , som tilsvarer \%>\% i tidyverse.
# |> er relativt ny i base R. Brukes denne istedenfor \%>\% behoves ikke ekstra pakker. 

statvar_koder <- c("manedslonn", "avtalt", "bonus", "uregtil", "overtid")
statistikkvariabel_koder <- c("Manedslonn", "Avtalt manedslonn", "Bonus", 
                              "Uregelmessige tillegg", "Overtidsgodtgjorelse")
statmal_koder <- c("gjennomsnitt", "median", "nedre_kvartil", "Ovre_kvartil", 
                   "antall_arbeidsforhold", "antall_heltidsekvivalenter")
statistikkmal_koder <- c("Gjennomsnitt", "Median", "Nedre kvartil", "Ovre kvartil", 
                         "Antall arbeidsforhold med lonn", "Antall heltidsekvivalenter")

long <- sdclonn_data("syntetisk_5000") |>
sdc_lonn(between = c("yrke1", "yrke2", "sektor3"), 
         within = c("pers_kjoenn", "arb_heldeltid"), k1 = 80, k2 = 85) |>
  long_sdclonn() |>
  recode(old = statvar_koder, new = statistikkvariabel_koder, 
         oldvar = "statvar", newvar = "statistikkvariabel") |>
  recode(old = statmal_koder, new = statistikkmal_koder, 
         oldvar = "statmal", newvar = "statistikkmal")
head(long) 

}
