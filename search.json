[{"path":"/SECURITY.html","id":null,"dir":"","previous_headings":"","what":"Security Policy","title":"Security Policy","text":"SSB takes security software products services seriously, includes source code repositories managed GitHub organization. believe responsible disclosure security vulnerabilities helps us ensure security privacy users.","code":""},{"path":"/SECURITY.html","id":"reporting-a-vulnerability","dir":"","previous_headings":"","what":"Reporting a Vulnerability","title":"Security Policy","text":"believe found security vulnerability SSB’s GitHub repositories, please report us using Github Private vulnerability reporting tool.","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Øyvind Langsrud. Author, maintainer. Statistics Norway. Copyright holder.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Langsrud Ø (2024). sdclonn: Konfidensialitet lønnsstatistikk. R package version 0.5.0, https://github.com/statisticsnorway/ssb-sdclonn/.","code":"@Manual{,   title = {sdclonn: Konfidensialitet i lønnsstatistikk},   author = {Øyvind Langsrud},   year = {2024},   note = {R package version 0.5.0},   url = {https://github.com/statisticsnorway/ssb-sdclonn/}, }"},{"path":"/index.html","id":"ssb-sdclonn","dir":"","previous_headings":"","what":"Konfidensialitet i lønnsstatistikk","title":"Konfidensialitet i lønnsstatistikk","text":"R-pakken sdclonn med metode konfidensialitet lønnsstatistikk","code":""},{"path":"/reference/find_tot_code.html","id":null,"dir":"Reference","previous_headings":"","what":"find_tot_code — find_tot_code","title":"find_tot_code — find_tot_code","text":"Based GaussSuppression:::FindTotCode2","code":""},{"path":"/reference/find_tot_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"find_tot_code — find_tot_code","text":"","code":"find_tot_code(x, cross_table)"},{"path":"/reference/find_tot_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"find_tot_code — find_tot_code","text":"x x cross_table cross_table","code":""},{"path":"/reference/find_tot_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"find_tot_code — find_tot_code","text":"list","code":""},{"path":"/reference/lag_variabler.html","id":null,"dir":"Reference","previous_headings":"","what":"Lager ekstra variabler i data — lag_variabler","title":"Lager ekstra variabler i data — lag_variabler","text":"Gammel funksjon som ikke brukes lenger","code":""},{"path":"/reference/lag_variabler.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Lager ekstra variabler i data — lag_variabler","text":"","code":"lag_variabler(data)"},{"path":"/reference/lag_variabler.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Lager ekstra variabler i data — lag_variabler","text":"data data","code":""},{"path":"/reference/lag_variabler.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Lager ekstra variabler i data — lag_variabler","text":"data frame","code":""},{"path":"/reference/lag_variabler.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Lager ekstra variabler i data — lag_variabler","text":"","code":"a <- sdclonn_data(\"synthetic_5000\") # b <- lag_variabler(a) # kommentert bort siden ikke eksportert lenger"},{"path":"/reference/long_sdclonn.html","id":null,"dir":"Reference","previous_headings":"","what":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","title":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","text":"Eksempler inkluderer omkoding med recode.","code":""},{"path":"/reference/long_sdclonn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","text":"","code":"long_sdclonn(   data,   prikket = TRUE,   long = TRUE,   statvar = c(\"manedslonn\", \"avtalt\", \"bonus\", \"uregtil\", \"overtid\") )"},{"path":"/reference/long_sdclonn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","text":"data output fra sdc_lonn prikket Prikkede tall output ved TRUE. Prikkede tall er missing (NA). long langformat ved TRUE. Ved FALSE returneres en versjon forberedt dataene. statvar Kategorinavn som er del av variabelnavn input og som vil finnes variabelen statvar output.","code":""},{"path":"/reference/long_sdclonn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","text":"data langformat","code":""},{"path":"/reference/long_sdclonn.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","text":"Funksjonen long_sdclonn er ment å lage data på format som trengs statistikkbanken. Men den lager ikke de endelige variabelnavn og koder som trengs. Ytterligere omkoding kan gjøres på flere måter. eksemplene vises det hvordan det kan gjøres med funksjonen recode som nå er innebygget denne pakken. Det kan uansett være problem med de norske bokstavene. Dette avhenger kanskje av plattformen dette kjøres på. Norske bokstaver unngås eksemplene. Ved kjøring av long_sdclonn-funksjonen så vil det bli vil det bli mange \"kopi-rader\" med antall arbeidsforhold og antall heltidsekvivalenter. Dette fordi disse variablene blir satt sammen med de ulike statistikkvariablene. Dersom det av en eller annen grunn skjer andre variabler feilkodes kan flere variabler bli «kopiert» til mange rader.","code":""},{"path":"/reference/long_sdclonn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Output fra sdc_lonn omgjort til langformat — long_sdclonn","text":"","code":"a <- sdclonn_data(\"syntetisk_5000\") out <- sdc_lonn(a,  between = c(\"yrke1\", \"yrke2\", \"sektor3\"),                   within = c(\"pers_kjoenn\", \"arb_heldeltid\"),                  k1 = 80, k2 = 85) #> [extend0 5000*39->5006*40] [pre_aggregate 5006*41->160*15] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .........................  # Lager data i langformat   long1 <- long_sdclonn(out)  # Legger inn nye koder for kategorier i to trinn  long2 <- recode(long1,                  old = c(\"manedslonn\", \"avtalt\", \"bonus\", \"uregtil\", \"overtid\"),                   new = c(\"Manedslonn\", \"Avtalt manedslonn\", \"Bonus\", \"Uregelmessige tillegg\",                          \"Overtidsgodtgjorelse\"),                  oldvar = \"statvar\",                  newvar = \"statistikkvariabel\") long3 <- recode(long2,                  old = c(\"gjennomsnitt\", \"median\", \"nedre_kvartil\", \"Ovre_kvartil\",                          \"antall_arbeidsforhold\", \"antall_heltidsekvivalenter\"),                   new = c(\"Gjennomsnitt\", \"Median\", \"Nedre kvartil\", \"Ovre kvartil\",                          \"Antall arbeidsforhold med lonn\", \"Antall heltidsekvivalenter\"),                 oldvar = \"statmal\",                  newvar = \"statistikkmal\") head(long3) #>   yrke2 sektor3 pers_kjoenn arb_heldeltid    statvar      statmal    value #> 1 Total   Total       Total         Total manedslonn gjennomsnitt 43767.48 #> 2 Total   Total       Total             1 manedslonn gjennomsnitt 43920.05 #> 3 Total   Total       Total             2 manedslonn gjennomsnitt 43212.23 #> 4 Total   Total           1         Total manedslonn gjennomsnitt 43333.07 #> 5 Total   Total           1             1 manedslonn gjennomsnitt 43582.89 #> 6 Total   Total           1             2 manedslonn gjennomsnitt 42506.49 #>   statistikkvariabel statistikkmal #> 1         Manedslonn  Gjennomsnitt #> 2         Manedslonn  Gjennomsnitt #> 3         Manedslonn  Gjennomsnitt #> 4         Manedslonn  Gjennomsnitt #> 5         Manedslonn  Gjennomsnitt #> 6         Manedslonn  Gjennomsnitt   # Viser alternativ metode der long blir det samme som long3. # Her brukes pipeoperatoren, |> , som tilsvarer %>% i tidyverse. # |> er relativt ny i base R. Brukes denne istedenfor %>% behoves ikke ekstra pakker.   statvar_koder <- c(\"manedslonn\", \"avtalt\", \"bonus\", \"uregtil\", \"overtid\") statistikkvariabel_koder <- c(\"Manedslonn\", \"Avtalt manedslonn\", \"Bonus\",                                \"Uregelmessige tillegg\", \"Overtidsgodtgjorelse\") statmal_koder <- c(\"gjennomsnitt\", \"median\", \"nedre_kvartil\", \"Ovre_kvartil\",                     \"antall_arbeidsforhold\", \"antall_heltidsekvivalenter\") statistikkmal_koder <- c(\"Gjennomsnitt\", \"Median\", \"Nedre kvartil\", \"Ovre kvartil\",                           \"Antall arbeidsforhold med lonn\", \"Antall heltidsekvivalenter\")  long <- sdclonn_data(\"syntetisk_5000\") |> sdc_lonn(between = c(\"yrke1\", \"yrke2\", \"sektor3\"),           within = c(\"pers_kjoenn\", \"arb_heldeltid\"), k1 = 80, k2 = 85) |>   long_sdclonn() |>   recode(old = statvar_koder, new = statistikkvariabel_koder,           oldvar = \"statvar\", newvar = \"statistikkvariabel\") |>   recode(old = statmal_koder, new = statistikkmal_koder,           oldvar = \"statmal\", newvar = \"statistikkmal\") #> [extend0 5000*39->5006*40] [pre_aggregate 5006*41->160*15] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ......................... head(long)  #>   yrke2 sektor3 pers_kjoenn arb_heldeltid    statvar      statmal    value #> 1 Total   Total       Total         Total manedslonn gjennomsnitt 43767.48 #> 2 Total   Total       Total             1 manedslonn gjennomsnitt 43920.05 #> 3 Total   Total       Total             2 manedslonn gjennomsnitt 43212.23 #> 4 Total   Total           1         Total manedslonn gjennomsnitt 43333.07 #> 5 Total   Total           1             1 manedslonn gjennomsnitt 43582.89 #> 6 Total   Total           1             2 manedslonn gjennomsnitt 42506.49 #>   statistikkvariabel statistikkmal #> 1         Manedslonn  Gjennomsnitt #> 2         Manedslonn  Gjennomsnitt #> 3         Manedslonn  Gjennomsnitt #> 4         Manedslonn  Gjennomsnitt #> 5         Manedslonn  Gjennomsnitt #> 6         Manedslonn  Gjennomsnitt"},{"path":"/reference/multiply_formulas.html","id":null,"dir":"Reference","previous_headings":"","what":"Multiply formulas — multiply_formulas","title":"Multiply formulas — multiply_formulas","text":"Combine formulas * another operator","code":""},{"path":"/reference/multiply_formulas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Multiply formulas — multiply_formulas","text":"","code":"multiply_formulas(formula1, formula2, operator = \"*\")"},{"path":"/reference/multiply_formulas.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Multiply formulas — multiply_formulas","text":"formula1 formula1 formula2 formula2 operator *, : another operator","code":""},{"path":"/reference/multiply_formulas.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Multiply formulas — multiply_formulas","text":"formula","code":""},{"path":"/reference/multiply_formulas.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Multiply formulas — multiply_formulas","text":"","code":"multiply_formulas(~x, ~y) #> ~(x) * (y) #> <environment: 0x556186dbbd68> multiply_formulas(~x+y, ~a*b + d:e) #> ~(x + y) * (a * b + d:e) #> <environment: 0x556186dbbd68> multiply_formulas(~x+y, ~a*b + d:e, \":\") #> ~(x + y):(a * b + d:e) #> <environment: 0x556186dbbd68>"},{"path":"/reference/recode.html","id":null,"dir":"Reference","previous_headings":"","what":"Recoding character data — recode","title":"Recoding character data — recode","text":"Recoding character data","code":""},{"path":"/reference/recode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recoding character data — recode","text":"","code":"recode(data, old, new, oldvar = NULL, newvar = oldvar)"},{"path":"/reference/recode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recoding character data — recode","text":"data data frame, list vector old vector old values new vector new values oldvar Variable data recoded. NULL, vector input assumed. newvar possible new variable recoded version oldvar","code":""},{"path":"/reference/recode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recoding character data — recode","text":"Recoded version data","code":""},{"path":"/reference/recode.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recoding character data — recode","text":"","code":"z <- SSBtools::SSBtoolsData(\"sprt_emp_withEU\") recode(z, c(\"Y15-29\", \"Y30-64\"), c(\"young\", \"old\"), oldvar = \"age\", newvar = \"newage\") #>       age      geo year ths_per    eu newage #> 1  Y15-29    Spain 2014    66.9    EU  young #> 2  Y15-29  Iceland 2014     1.8 nonEU  young #> 3  Y15-29 Portugal 2014    11.6    EU  young #> 4  Y30-64    Spain 2014   120.3    EU    old #> 5  Y30-64  Iceland 2014     1.5 nonEU    old #> 6  Y30-64 Portugal 2014    20.2    EU    old #> 7  Y15-29    Spain 2015    63.4    EU  young #> 8  Y15-29  Iceland 2015     1.9 nonEU  young #> 9  Y15-29 Portugal 2015    14.2    EU  young #> 10 Y30-64    Spain 2015   119.6    EU    old #> 11 Y30-64  Iceland 2015     1.6 nonEU    old #> 12 Y30-64 Portugal 2015    24.3    EU    old #> 13 Y15-29    Spain 2016    69.1    EU  young #> 14 Y15-29  Iceland 2016     1.9 nonEU  young #> 15 Y15-29 Portugal 2016    12.7    EU  young #> 16 Y30-64    Spain 2016   122.1    EU    old #> 17 Y30-64  Iceland 2016     1.9 nonEU    old #> 18 Y30-64 Portugal 2016    25.8    EU    old recode(z$year, 2014:2016, 14:16) #>  [1] \"14\" \"14\" \"14\" \"14\" \"14\" \"14\" \"15\" \"15\" \"15\" \"15\" \"15\" \"15\" \"16\" \"16\" \"16\" #> [16] \"16\" \"16\" \"16\" recode(z, c(\"2014\", \"2016\"), c(\"14\", \"16\"), oldvar = \"year\") #>       age      geo year ths_per    eu #> 1  Y15-29    Spain   14    66.9    EU #> 2  Y15-29  Iceland   14     1.8 nonEU #> 3  Y15-29 Portugal   14    11.6    EU #> 4  Y30-64    Spain   14   120.3    EU #> 5  Y30-64  Iceland   14     1.5 nonEU #> 6  Y30-64 Portugal   14    20.2    EU #> 7  Y15-29    Spain 2015    63.4    EU #> 8  Y15-29  Iceland 2015     1.9 nonEU #> 9  Y15-29 Portugal 2015    14.2    EU #> 10 Y30-64    Spain 2015   119.6    EU #> 11 Y30-64  Iceland 2015     1.6 nonEU #> 12 Y30-64 Portugal 2015    24.3    EU #> 13 Y15-29    Spain   16    69.1    EU #> 14 Y15-29  Iceland   16     1.9 nonEU #> 15 Y15-29 Portugal   16    12.7    EU #> 16 Y30-64    Spain   16   122.1    EU #> 17 Y30-64  Iceland   16     1.9 nonEU #> 18 Y30-64 Portugal   16    25.8    EU  SSBtools::SSBtoolsData(\"sprt_emp_withEU\") |>   recode(c(\"Y15-29\", \"Y30-64\"), c(\"young\", \"old\"), oldvar = \"age\", newvar = \"newage\") |>   recode(2014:2016, 14:16, oldvar = \"year\")  #>       age      geo year ths_per    eu newage #> 1  Y15-29    Spain   14    66.9    EU  young #> 2  Y15-29  Iceland   14     1.8 nonEU  young #> 3  Y15-29 Portugal   14    11.6    EU  young #> 4  Y30-64    Spain   14   120.3    EU    old #> 5  Y30-64  Iceland   14     1.5 nonEU    old #> 6  Y30-64 Portugal   14    20.2    EU    old #> 7  Y15-29    Spain   15    63.4    EU  young #> 8  Y15-29  Iceland   15     1.9 nonEU  young #> 9  Y15-29 Portugal   15    14.2    EU  young #> 10 Y30-64    Spain   15   119.6    EU    old #> 11 Y30-64  Iceland   15     1.6 nonEU    old #> 12 Y30-64 Portugal   15    24.3    EU    old #> 13 Y15-29    Spain   16    69.1    EU  young #> 14 Y15-29  Iceland   16     1.9 nonEU  young #> 15 Y15-29 Portugal   16    12.7    EU  young #> 16 Y30-64    Spain   16   122.1    EU    old #> 17 Y30-64  Iceland   16     1.9 nonEU    old #> 18 Y30-64 Portugal   16    25.8    EU    old"},{"path":"/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. SSBtools formula_selection","code":""},{"path":"/reference/sdc_lonn.html","id":null,"dir":"Reference","previous_headings":"","what":"Undertrykking i lønnsstatistikk — sdc_lonn","title":"Undertrykking i lønnsstatistikk — sdc_lonn","text":"Input er mikrodata og output er (samordnede) tabell(er) med alle ønskede aggregeringsnivåer.","code":""},{"path":"/reference/sdc_lonn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Undertrykking i lønnsstatistikk — sdc_lonn","text":"","code":"sdc_lonn(   data,   between = NULL,   within = NULL,   var_vektet = c(manedslonn = \"lonn_ekv_ialt_pub\", avtalt = \"lonn_ekv_fmlonn_pub\", bonus     = \"lonn_ekv_bonus_pub\", uregtil = \"lonn_ekv_uregtil_pub\", overtid =     \"lonn_overtid_pub\"),   var_uvektet = NULL,   privat = \"privat\",   var_med_privat = NULL,   var_frtk_id = \"frtk_id_ssb\",   var_virk_id = \"virk_id_ssb\",   var_ekv_vekt = \"lonn_ekv_vekt\",   var_dominans = var_vektet[1],   var_sum = NULL,   freq_within = 2,   between_regel = TRUE,   k1,   k2,   secondary2 = TRUE,   grenseverdi = 100,   grenseverdi2 = 4,   extend0 = TRUE,   removeEmpty = FALSE,   formula = NULL,   output = NULL,   suppressed_data = NULL,   dim_var_extra = NULL,   avoidHierarchical = FALSE,   structuralEmpty = FALSE,   run_gauss = TRUE,   roundBase = 0,   roundMultiple = 1,   verbose = TRUE )"},{"path":"/reference/sdc_lonn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Undertrykking i lønnsstatistikk — sdc_lonn","text":"data input data eller resultat fra output = \"aggregated\" Variabler som grupperer foretak eller en formel disse. Se også parameteren formula som er et alternativ. within Variabler innen foretak eller en formel disse. var_vektet Lønnsvariabler navngitt ved navn som skal brukes output. Ved manglende navn brukes variabelnavnet direkte. var_uvektet Som var_vektet , men disse variablene beregnes uvektet. Default (NULL) er ingen slike variabler er med. privat Privatkoden som brukes. Default er \"privat\". var_med_privat Variabel (sektor) med privatkoden. Default (NULL) betyr det letes automatisk gjennom tabellvariabler () å finne privat-koden. var_frtk_id Variabelnavn id foretak. Default er \"frtk_id_ssb\". var_virk_id Variabelnavn id virksomhet.Default er \"virk_id_ssb\". var_ekv_vekt Variabelnavn vekt heltidsekvivalenter. Default er \"lonn_ekv_vekt\",. var_dominans Variabelnavn variabel som er utganspunkt dominansberegning. Default er første var_vektet-variabel. Dominansberegningen vekter uansett denne variabelen. var_sum Ekstra numeriske variabler Som bare skal summeres, navngitt ved navn som skal brukes output. Tilsvarende som var_vektet . freq_within max-verdi primærprikking av Antall arbeidsforhold \"within\". Se tekst (n_within)  sdc_lonn_extra_details. between_regel Ved TRUE er \"\" utgangspunkt dominansregler k1 Parameter dominansregler (en prosentverdi). TRUE betyr vanlig verdi. k2 Parameter dominansregler (en prosentverdi). TRUE betyr vanlig verdi. secondary2 Når secondary2 er TRUE sekundærprikkes det omganger. første omgang sekundærprikkes det ikke med tanke på å hindre tilbakeregning  av -totaler av Antall arbeidsforhold ut fra dominansregler (k1 og k2), men kun med tanke på within (f.eks. kjønn). andre omgang sekundærprikkes det også med tanke -totaler som beskrevet . Det er antall heltidsekvivalenter som blir sekundærprikket ut fra dette. Poenget med runder er publisering av gjennomsnittsverdier og antall heltidsekvivalenter som må beskyttes av dominansregler. Gjennomsnittsverdier kan tilbakeregnes  via summer (gjennomsnitt * antall heltidsekvivalenter) dersom både gjennomsnitt og antall heltidsekvivalenter er tilgjengelig. Dette hindres altså av sekundærprikkingen av antall heltidsekvivalenter. Når secondary2 er FALSE fortas sekundærprikking bare en gang uten tanke på antall arbeidsforhold -totaler ikke må beskyttes. grenseverdi Minste antall ok arbeidsforhold publisering av median, kvartiler og gjennomsnittslønn, samt andre variabler som antall arbeidsforhold og antall heltidsekvivalenter. (ingen sekundærprikking). Se sdc_lonn_extra_details. grenseverdi2 Minste antall ok arbeidsforhold som ikke primærprikkes (primary2) forut andre runde sekundærprikking. Se sdc_lonn_extra_details. extend0 Ved noe annet enn extend0 = TRUE  kjøres Extend0 SSBtools. Trengs beskyttelse av \"within\"-0-ere. extend0 = TRUE (default): Innen hver -gruppen så sjekkes det om alle kombinasjoner av within-variablene som fra før finnes dataene også fins den bestemte -gruppen. Hvis ikke legges det til observasjoner med 0. FALSE og også TRUE kan gi warning som kan slås av med parameteren structuralEmpty (se nedenfor). extend0 = \"full\": motsetning til TRUE så legges det også til kombinasjoner som ikke fins dataene fra før. Ved avoidHierarchical = FALSE (default) respekteres hierarkiske sammenhenger slik ikke \"umulige\" kombinasjoner legges til. Ved avoidHierarchical = TRUE legges det til alle mulige kombinasjoner. extend0 som liste: Avansert spesifisering av hvordan within-variablene kombineres. Eks: extend0 <- list(\"\", \"B\", c(\"C\", \"D\")). Det legges til alle mulige kombinasjoner av , B og (C-D-kombinasjoner som fins dataene fra før). removeEmpty Ved TRUE fjernes -kombinasjoner der det ikke finnes data. Dette er en parameter til ModelMatrix SSBtools. formula En formel som inkluderer både - og within-variablene. Parameteren within brukes da tillegg, mens -parameteren ikke er bruk (ignoreres). output Mulighet annen output. suppressed_data Outputdata fra en annen kjøring av sdc_lonn. Prikkingen skal samordnes slik kombinasjoner som fins suppressed_data prikkes på samme måte. Det blir nye variabler output, krav_inputsupp og krav_inputsupp2. Disse forteller om prikking som er samordnet. Verdiene ved samordning er 0 (ikke prikket) eller 1 (prikket) og ellers missing. Overlapp mellom prikkingene de rundene er ikke fjernet. dette skal virke må man passe på like variabler får samme navn. Se dim_var_extra nedenfor. Ved bruk av list kan flere datasett være input. F.eks.: suppressed_data = list(out6, out7, out8) dim_var_extra Ekstra dimensjonsvariabler (som , within, formula) som skal tas hensyn til ved navngiving av outputvariabler. Dette å sikre like navn ved bruk av suppressed_data. Det er ok med variabler som ikke får betydning (fins fra før , within, formula eller ikke relatert til disse). avoidHierarchical Ved TRUE og ved formelinput kombineres ikke hierarkiske variabler output. Dette er en parameter til ModelMatrix SSBtools. Om dette brukes blir dim_var_extra ignorert siden dette da ikke gir mening. Se også parameteren extend0. structuralEmpty TRUE, output cells contributing inner cells (zeros column x) forced primary suppressed. Thus, cells considered structural zeros. structuralEmpty TRUE, following error message avoided: Suppressed cells empty input protected. Extend input data zeros?. removeEmpty TRUE, structuralEmpty superfluous. Parameteren og beskrivelsen er kopiert fra GaussSuppression::GaussSuppressionFromData. Bruk av suppressed_data kan føre til celler allikevel blir primærprikket. run_gauss Ingen sekundærprikking dersom denne settes til FALSE, Default er TRUE. roundBase Ved andre verdier enn 0 foretas avrunding av antall arbeidsforhold. Funksjonen  PLSroundingPublish bruker da denne roundBase-parameteren. Ny ekstra variabel helt til slutt output er rounded_antall_arbeidsforhold. Variabelen prikket_antall_arbeidsforhold blir endret til å inneholde de samme avrundede verdiene, bortsett fra noen av dem er prikket. Denne prikkingen endres også slik dette kun handler om dominansregel. Teknisk har da n_within_krav blitt flyttet til andre runde prikking (fra  primary til primary2). Det sørges også ingen primærprikking første runde ved rounded_antall_arbeidsforhold <= roundBase. Litt modifisert blir også krav_grenseverdi ved det også kreves rounded_antall_arbeidsforhold < grenseverdi tillegg til , som vanlig, regel_within_okantall < grenseverdi. roundMultiple Når dette heltalltallet er større enn 1, vil avrunding også sørge alle tall < roundBase * roundMultiple er roundBase-multipler. F.eks. ved roundBase=3 og roundMultiple=2 så vil 1,2,4 og 5 ikke forekomme avrundet output, mens 0, 3 og 6 forekommer. Det sørges også ingen primærprikking første runde ved rounded_antall_arbeidsforhold <= roundBase * roundMultiple. verbose Whether print information calculations.","code":""},{"path":"/reference/sdc_lonn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Undertrykking i lønnsstatistikk — sdc_lonn","text":"data frame eller liste","code":""},{"path":"/reference/sdc_lonn.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Undertrykking i lønnsstatistikk — sdc_lonn","text":"Grunnen til primary2 og secondary2 ikke nødvendigvis summeres til suppressed2 er det primary2 kan inngå celler som er med suppressed. Disse er fjernet fra suppressed2. Variablene som starter med  regel_  er avledet fra regel_within_-variablene på følgende måte: regel_within_ ser på hver kombinasjon av within-variabler (som kjønn og alder). regel_ er det bare totalverdiene within-variablene som gjelder. F.eks. antall heltidsekvivalenter er da ikke spesifikk kombinasjon av kjønn og alder men total-verdi -variablene man ser på. F.eks  en kombinasjon av arb_yrke_styrk08 og sektor3. regel_within_ er dermed mange rader like. Nye variabler er lagt til regel_istot: Denne er 1 nå det er en snakk om en rad der det er totaler within-variablene. disse radene er regel_-variablene og regel_within_-variablene like. regel_dominant1_n: Beregnet fra regel_-variablene som max_n/sum_n. regel_dominant2_n: Beregnet fra regel_-variablene som (max_n + second_max_n)/sum_n. regel_dominant1_l: Beregnet fra regel_-variablene som max_l/sum_l. regel_dominant2_l: Beregnet fra regel_-variablene som (max_l + second_max_l)/sum_l. Disse krav-variablene er egentlig logiske (TRUE/FALSE), men output blir dette 0/1. krav_arbeidsforhold og krav_ekvivalent samsvarer nøyaktig med endelig prikking av tilsvarende variabler. krav_lonn samsvarer med endelig prikking av lønnsvariablene (median, snitt og kvartiler). er det skrevet og istedenfor vanlige r-kode operatorer som er | og &. (Det var ikke mulig med tegnet  | tabellen p.g.kombinasjon markdown/roxygen/latex.) Operatoren ! betyr \"ikke\".","code":""},{"path":[]},{"path":"/reference/sdc_lonn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Undertrykking i lønnsstatistikk — sdc_lonn","text":"","code":"# Siden default er fjernet i ny versjon  between <- c(\"yrke1\", \"yrke2\", \"yrke3\", \"arb_yrke_styrk08\", \"sektor3\") within <- c(\"pers_kjoenn\", \"arb_heldeltid\")  a <- sdclonn_data(\"syntetisk_5000\") out <- sdc_lonn(a, between = between, within = within, k1 = 85, k2 = 95) #> [extend0 5000*39->5014*40] [pre_aggregate 5014*41->272*17] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ......................... out2 <- sdc_lonn(a, between = ~yrke3 + (yrke2 + yrke1) * sektor3,                    within = ~arb_heldeltid, k1 = 85, k2 = 95) #> [extend0 5000*39->5001*40] [pre_aggregate 5001*41->112*15] [ModelMatrix]  #> [dummy_aggregate..........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ..........................  # Med avrunding. Altså bruk av roundBase-parameteren outR <- sdc_lonn(a, between = between, within = within, roundBase = 3,                  k1 = 85, k2 = 95) #> [extend0 5000*39->5014*40] [pre_aggregate 5014*41->272*18] [ModelMatrix] [crossprod]  #> [dummy_aggregate.........................]  #> SmallCountRounding: [-**.......=] #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .........................  out2A <- sdc_lonn(a, between = ~yrke3 + (yrke2 + yrke1) * sektor3, within = ~arb_heldeltid,                    output = \"aggregated\") #> [extend0 5000*39->5001*40] [pre_aggregate 5001*41->112*15] [ModelMatrix]  #> [dummy_aggregate..........................]  out2B <- sdc_lonn(out2A, k1 = 85, k2 = 95) #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .......................... identical(out2, out2B) #> [1] TRUE out2C <- sdc_lonn(out2A, k1 = 80, k2 = 90) #> GaussSuppression_anySum_numttH: ........................... #> GaussSuppression_anySum_numttH: ......................... identical(out2, out2C) #> [1] FALSE  out3 <- sdc_lonn(a, grenseverdi = 20, between = between, within = within,                  var_uvektet = c(stillingspst = \"arb_stillingspst\", alder = \"pers_alder\"),                  k1 = 80, k2 = 90) #> [extend0 5000*39->5014*40] [pre_aggregate 5014*41->272*20] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .........................  out4 <- sdc_lonn(a, between =    ~(yrke3 + (yrke2 + yrke1) * sektor3) + pers_kommnr * (yrke2 + yrke1) + arb_fylke * yrke1,    within = ~arb_heldeltid * pers_kjoenn, output = \"aggregated\") #> [extend0 5000*39->5589*40] [pre_aggregate 5589*41->1764*18] [ModelMatrix]  #> [dummy_aggregate.........................]     out4A <- sdc_lonn(out4, k1 = 90, k2 = 95) #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ......................... out4B <- sdc_lonn(out4, k1 = 80, k2 = 90) #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ......................... out4C <- sdc_lonn(out4, k1 = 90, k2 = 95, grenseverdi = 20) #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .........................  ### Skriver ut antall prikker eller antall der krav-variabel er TRUE. sum2(out) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                               1910                               1917  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                               1897                               1897  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                               1897                               1897  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                               1897                               1897  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                               1897                               1897  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                               1897                               1897  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                               1897                               1897  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                               1897                               1897  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                               1897                               1897  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                               1897                               1897  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                               1897                               1897  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                                747                                 90  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                135                                 90  #>                   krav_dominant2_l                      krav_dominant  #>                                135                                135  #>                      krav_n_within                         krav_istot  #>                                138                                264  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                               1897                                138  #>                       krav_primary                      krav_primary2  #>                                213                                150  #>                    krav_suppressed                   krav_suppressed2  #>                                761                                182  #>                     krav_secondary                    krav_secondary2  #>                                548                                165  #>                          krav_lonn                krav_arbeidsforhold  #>                               1897                               1910  #>                    krav_ekvivalent  #>                               1917  sum2(out3) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                               1156                               1250  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                                885                                885  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                                885                                885  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                                885                                885  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                                885                                885  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                                885                                885  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                                885                                885  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                                885                                885  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                                885                                885  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                                885                                885  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                                885                                885  #>  prikket_stillingspst_gjennomsnitt prikket_stillingspst_nedre_kvartil  #>                                885                                885  #>        prikket_stillingspst_median  prikket_stillingspst_ovre_kvartil  #>                                885                                885  #>         prikket_alder_gjennomsnitt        prikket_alder_nedre_kvartil  #>                                885                                885  #>               prikket_alder_median         prikket_alder_ovre_kvartil  #>                                885                                885  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                                747                                126  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                153                                126  #>                   krav_dominant2_l                      krav_dominant  #>                                162                                171  #>                      krav_n_within                         krav_istot  #>                                138                                264  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                                859                                138  #>                       krav_primary                      krav_primary2  #>                                245                                154  #>                    krav_suppressed                   krav_suppressed2  #>                                788                                170  #>                     krav_secondary                    krav_secondary2  #>                                543                                149  #>                          krav_lonn                krav_arbeidsforhold  #>                                885                               1156  #>                    krav_ekvivalent  #>                               1250  sum2(out4A) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                               2970                               2970  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                               2965                               2965  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                               2965                               2965  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                               2965                               2965  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                               2965                               2965  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                               2965                               2965  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                               2965                               2965  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                               2965                               2965  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                               2965                               2965  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                               2965                               2965  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                               2965                               2965  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                               1080                                 27  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                 63                                 27  #>                   krav_dominant2_l                      krav_dominant  #>                                 72                                 72  #>                      krav_n_within                         krav_istot  #>                                674                                391  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                               2965                                538  #>                       krav_primary                      krav_primary2  #>                                703                                543  #>                    krav_suppressed                   krav_suppressed2  #>                               1245                                155  #>                     krav_secondary                    krav_secondary2  #>                                542                                 84  #>                          krav_lonn                krav_arbeidsforhold  #>                               2965                               2970  #>                    krav_ekvivalent  #>                               2970  sum2(out4B) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                               2976                               2979  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                               2965                               2965  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                               2965                               2965  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                               2965                               2965  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                               2965                               2965  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                               2965                               2965  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                               2965                               2965  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                               2965                               2965  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                               2965                               2965  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                               2965                               2965  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                               2965                               2965  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                               1080                                 54  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                 72                                 45  #>                   krav_dominant2_l                      krav_dominant  #>                                 90                                 90  #>                      krav_n_within                         krav_istot  #>                                674                                391  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                               2965                                538  #>                       krav_primary                      krav_primary2  #>                                714                                545  #>                    krav_suppressed                   krav_suppressed2  #>                               1277                                159  #>                     krav_secondary                    krav_secondary2  #>                                563                                 86  #>                          krav_lonn                krav_arbeidsforhold  #>                               2965                               2976  #>                    krav_ekvivalent  #>                               2979  sum2(out4C) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                               2133                               2153  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                               2020                               2020  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                               2020                               2020  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                               2020                               2020  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                               2020                               2020  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                               2020                               2020  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                               2020                               2020  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                               2020                               2020  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                               2020                               2020  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                               2020                               2020  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                               2020                               2020  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                               1080                                 27  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                 63                                 27  #>                   krav_dominant2_l                      krav_dominant  #>                                 72                                 72  #>                      krav_n_within                         krav_istot  #>                                674                                391  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                               2018                                538  #>                       krav_primary                      krav_primary2  #>                                703                                543  #>                    krav_suppressed                   krav_suppressed2  #>                               1245                                155  #>                     krav_secondary                    krav_secondary2  #>                                542                                 84  #>                          krav_lonn                krav_arbeidsforhold  #>                               2020                               2133  #>                    krav_ekvivalent  #>                               2153  sum2(out2) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                                151                                151  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                                151                                151  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                                151                                151  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                                151                                151  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                                151                                151  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                                151                                151  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                                151                                151  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                                151                                151  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                                151                                151  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                                151                                151  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                                151                                151  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                                117                                  6  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                  9                                  6  #>                   krav_dominant2_l                      krav_dominant  #>                                  9                                  9  #>                      krav_n_within                         krav_istot  #>                                  1                                104  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                                151                                  2  #>                       krav_primary                      krav_primary2  #>                                  6                                  4  #>                    krav_suppressed                   krav_suppressed2  #>                                 22                                  6  #>                     krav_secondary                    krav_secondary2  #>                                 16                                  5  #>                          krav_lonn                krav_arbeidsforhold  #>                                151                                151  #>                    krav_ekvivalent  #>                                151  sum2(out2C) #>      prikket_antall_arbeidsforhold prikket_antall_heltidsekvivalenter  #>                                153                                156  #>    prikket_manedslonn_gjennomsnitt   prikket_manedslonn_nedre_kvartil  #>                                151                                151  #>          prikket_manedslonn_median    prikket_manedslonn_ovre_kvartil  #>                                151                                151  #>        prikket_avtalt_gjennomsnitt       prikket_avtalt_nedre_kvartil  #>                                151                                151  #>              prikket_avtalt_median        prikket_avtalt_ovre_kvartil  #>                                151                                151  #>         prikket_bonus_gjennomsnitt        prikket_bonus_nedre_kvartil  #>                                151                                151  #>               prikket_bonus_median         prikket_bonus_ovre_kvartil  #>                                151                                151  #>       prikket_uregtil_gjennomsnitt      prikket_uregtil_nedre_kvartil  #>                                151                                151  #>             prikket_uregtil_median       prikket_uregtil_ovre_kvartil  #>                                151                                151  #>       prikket_overtid_gjennomsnitt      prikket_overtid_nedre_kvartil  #>                                151                                151  #>             prikket_overtid_median       prikket_overtid_ovre_kvartil  #>                                151                                151  #>                krav_ikke_offentlig                   krav_dominant1_n  #>                                117                                 12  #>                   krav_dominant2_n                   krav_dominant1_l  #>                                 12                                 12  #>                   krav_dominant2_l                      krav_dominant  #>                                 12                                 12  #>                      krav_n_within                         krav_istot  #>                                  1                                104  #>                   krav_grenseverdi                  krav_grenseverdi2  #>                                151                                  2  #>                       krav_primary                      krav_primary2  #>                                  8                                  5  #>                    krav_suppressed                   krav_suppressed2  #>                                 30                                 10  #>                     krav_secondary                    krav_secondary2  #>                                 22                                  8  #>                          krav_lonn                krav_arbeidsforhold  #>                                151                                153  #>                    krav_ekvivalent  #>                                156    ####  Bruk av formula_selection + long_sdclonn  ####  s2a <- formula_selection(out2, ~yrke1 * sektor3 * arb_heldeltid) s2b <- formula_selection(out2, ~yrke3 * arb_heldeltid) s2a_long <- long_sdclonn(s2a) s2b_long <- long_sdclonn(s2b)   ####  Bruk av formula + formula_selection + long_sdclonn  ####  out5 <- sdc_lonn(a, formula = ~arb_fylke * (yrke1 + yrke2) * arb_heldeltid * pers_kjoenn                       + (arb_fylke + pers_kommnr) * yrke1 * pers_kjoenn,                   within = c(\"pers_kjoenn\", \"arb_heldeltid\"),                  var_med_privat = \"sektor3\",                   k1 = 80, k2 = 90) #> [extend0 5000*39->5217*40] [pre_aggregate 5217*41->800*16] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .........................  s5a <- formula_selection(out5, ~arb_fylke * (yrke1 + yrke2) * arb_heldeltid * pers_kjoenn) s5b <- formula_selection(out5, ~(arb_fylke + pers_kommnr) * yrke1 * pers_kjoenn) s5a_long <- long_sdclonn(s5a) s5b_long <- long_sdclonn(s5b)   ####  Bruk av suppressed_data.   ####  #   out7 og out8 er som out5, uten alt samtidig   out6 <- sdc_lonn(a, formula = ~arb_fylke * yrke1 * arb_heldeltid * pers_kjoenn                       + arb_fylke * yrke1 * pers_kjoenn, # Overflødig linje, men skader ikke                   within = c(\"pers_kjoenn\", \"arb_heldeltid\"),                   var_med_privat = \"sektor3\",                   k1 = 80, k2 = 90,                  dim_var_extra = c(\"yrke2\", \"pers_kommnr\"),) #> [extend0 5000*39->5045*40] [pre_aggregate 5045*41->232*14] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ..........................  out7 <- sdc_lonn(a, formula = ~arb_fylke * (yrke1 + yrke2) * arb_heldeltid * pers_kjoenn,                   within = c(\"pers_kjoenn\", \"arb_heldeltid\"),                   var_med_privat = \"sektor3\",                   dim_var_extra = c(\"yrke2\", \"pers_kommnr\"),                  k1 = 80, k2 = 90,                   suppressed_data = out6) #> [extend0 5000*39->5124*40] [pre_aggregate 5124*41->488*15] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: .........................  out8 <- sdc_lonn(a, formula = ~(arb_fylke + pers_kommnr) * yrke1 * pers_kjoenn,                   within = \"pers_kjoenn\",                   var_med_privat = \"sektor3\",                   dim_var_extra = c(\"yrke2\", \"pers_kommnr\"),                  k1 = 80, k2 = 90,                   suppressed_data = out6) #> [extend0 5000*39->5018*40] [pre_aggregate 5018*41->186*14] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ............. #> Warning: 2 (0 ordinary, 0 extra, 2 singleton) unsafe primary cells due to forced cells #> ............ #> GaussSuppression_anySum_numttH: ..........................       # out5 på nytt med tre datasett som suppressed_data                    out5b <- sdc_lonn(a, formula = ~arb_fylke * (yrke1 + yrke2) * arb_heldeltid * pers_kjoenn                       + (arb_fylke + pers_kommnr) * yrke1 * pers_kjoenn,                   within = c(\"pers_kjoenn\", \"arb_heldeltid\"),                  var_med_privat = \"sektor3\",                  k1 = 80, k2 = 90,                  suppressed_data = list(out6, out7, out8))                 #> [extend0 5000*39->5217*40] [pre_aggregate 5217*41->800*16] [ModelMatrix]  #> [dummy_aggregate.........................]  #> GaussSuppression_anySum_numttH: ......................... #> GaussSuppression_anySum_numttH: ........................."},{"path":"/reference/sdc_lonn_extra_details.html","id":null,"dir":"Reference","previous_headings":"","what":"Ekstra sdclonn-detaljer — sdc_lonn_extra_details","title":"Ekstra sdclonn-detaljer — sdc_lonn_extra_details","text":"Ekstra sdc_lonn-detaljer. Teksten kopiert fra annen sammenheng.","code":""},{"path":"/reference/sdc_lonn_extra_details.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Ekstra sdclonn-detaljer — sdc_lonn_extra_details","text":"n_within: Utgangspunktet, uten avrunding, parameteren freq_within som fører til n_within_krav er dette er en frekvenstabell tillegg til en volumtabell med lønnsdata. en frekvenstabell er poenget å beskytte mot avsløring av kategoriinformasjon slik som kjønn, alder og heltid/deltid. Det kan selvfølgelig diskuteres om dette skal beskyttes. Men dersom det skal beskyttes er et hovedpoeng å primærprikke 0-ere. tillegg til 0-ere kan 1-ere og 2-ere også primærprikkes å gjøre det tryggere. Illustrerer dette ved disse dataene: kan man altså avsløre alle kvinner jobber deltid. Alternativt kan man avsløre kjønnet er mann dersom man vet det er heltid. Dette er en ekstra krevende del av sdclonn siden dataene må utvides siden de nødvendige/riktige 0-ere kommer med dataene. Når avrunding gjøres kan man ikke lenger stole på 0-ere man ser antall_arbeidsforhold er korrekte 0-er, og man trenger ikke gjøre slik prikking. Men man kan fremdeles se ekte 0-er ved å se på antall_heltidsekvivalenter. Løsningen ble da å fortsette med n_within-prikking når det gjelder prikking av antall_heltidsekvivalenter. Bruken av n_within ble dermed flyttet til andre runde prikking. grenseverdi2: Utgangspunktet denne er å beskytte mot det skal gå å regne seg tilbake til små verdier av antall heltidsekvivalenter, som igjen gjør man kan beregne lønn via gjennomsnittslønn. Etter avrunding er tatt inn er det praksis parametere som styrer samme type primærprikking. Det prikkes når enten n_arbeidsforhold <= freq_within eller okantall < grenseverdi2. En forskjell er freq_within kun brukes «within» (ikke når det er total på alle within-variabler) mens grenseverdi2 brukes på alle tallene. praksis tror jeg ikke freq_within har noen betydning så lenge grenseverdi2 er et mye større tall. begge tilfeller vil 0-ere bli prikket slik det er programmert nå, men egentlig er det logikken bak freq_within som skal medføre prikking av 0. grenseverdi: Denne parameteren, som nå har 100 som standardverdi, brukes til prikking av lønnsvariablene samt antall arbeidsforhold og antall heltidsekvivalenter output. Men dette fører ikke til sekundærprikking, og det beskyttes altså ikke mot mulig tilbakeregning av tallene antall heltidsekvivalenter. Parameteren har ingenting å gjøre med den krevende sekundærprikkealgoritmen programmet. Altså kun noe som gjøres på output. Hvorfor er sdclonn tregere enn SdcForetakPerson? Det er altså prikkingen som tar tid. SdcForetakPerson handler prikking om , mens problemstillingene within er løst ved avrunding. Prikkingen kan derfor løses ved et datasett som er aggregert kun til -variablene. sdclonn er det dominansprikking som kun er . Men det er allikevel gjenværende problemstillinger within, slik som parameteren grenseverdi2. Prikkingen kan derfor ikke løses ved et datasett som er aggregert kun til -variablene. Dessuten er det problemstillingen med 0-ere som faktisk gjør dataene utvides med rader som representerer nødvendige 0-ere.","code":"kjonn  heldeltid  antall_heltidsekvivalenter  antall_arbeidsforhold  Total      Total                          13                     20  Total     deltid                           7                     14  Total     heltid                           6                      6 kvinne      Total                           4                      8 kvinne     deltid                           4                      8 kvinne     heltid                           0                      0   mann      Total                           9                     12   mann     deltid                           3                      6   mann     heltid                           6                      6"},{"path":"/reference/sdclonn_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Function that returns a dataset — sdclonn_data","title":"Function that returns a dataset — sdclonn_data","text":"Function returns dataset","code":""},{"path":"/reference/sdclonn_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function that returns a dataset — sdclonn_data","text":"","code":"sdclonn_data(dataset)"},{"path":"/reference/sdclonn_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function that returns a dataset — sdclonn_data","text":"dataset Name data set within sdclonn package","code":""},{"path":"/reference/sdclonn_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function that returns a dataset — sdclonn_data","text":"data frame","code":""},{"path":"/reference/sdclonn_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function that returns a dataset — sdclonn_data","text":"","code":"a <- sdclonn_data(\"synthetic_5000\")  # Alle variabler med små bosktaver + variabel sektor3 b <- sdclonn_data(\"syntetisk_5000\")"},{"path":"/reference/sum_na.html","id":null,"dir":"Reference","previous_headings":"","what":"sum_na — sum_na","title":"sum_na — sum_na","text":"sum_na","code":""},{"path":"/reference/sum_na.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"sum_na — sum_na","text":"","code":"sum_na(   x,   code = \"prikket_\",   is_na = TRUE,   fix_names = TRUE,   cross_prod = FALSE )  sum2(x)  s(...)"},{"path":"/reference/sum_na.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"sum_na — sum_na","text":"x data frame code code is_na Teller missing når TRUE fix_names Tar bort ´code´ fra navn cross_prod Kryssmatrise ved TRUE","code":""},{"path":"/reference/sum_na.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"sum_na — sum_na","text":"named integer vector eller matrise","code":""},{"path":"/reference/sum_na.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"sum_na — sum_na","text":"sum2 gir resultater fra både  prikket_ og krav_ s definert som sum_na(sdc_lonn(...)).","code":""},{"path":"/reference/synthetic_5000.html","id":null,"dir":"Reference","previous_headings":"","what":"Fictitious datasets returned by sdclonn_data() — synthetic_5000","title":"Fictitious datasets returned by sdclonn_data() — synthetic_5000","text":"Fictitious datasets returned sdclonn_data()","code":""},{"path":"/reference/tot_code_match.html","id":null,"dir":"Reference","previous_headings":"","what":"tot_code_match — tot_code_match","title":"tot_code_match — tot_code_match","text":"Limits match rows total code non-common dim columns","code":""},{"path":"/reference/tot_code_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tot_code_match — tot_code_match","text":"","code":"tot_code_match(   x,   y,   x_tot_code = { k <- as.list(rep(\"Total\", ncol(x))) names(k) <- names(x)          k  },   y_tot_code = { k <- as.list(rep(\"Total\", ncol(y))) names(k) <- names(y)          k  },   both = FALSE,   complete_match = FALSE )"},{"path":"/reference/tot_code_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tot_code_match — tot_code_match","text":"x x y y x_tot_code x_tot_code y_tot_code y_tot_code  complete_match Kun testing. TRUE skal gi samme svar, men ikke like rask kode.","code":""},{"path":"/reference/tot_code_match.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"tot_code_match — tot_code_match","text":"integer vector list","code":""},{"path":"/reference/tot_code_match.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"tot_code_match — tot_code_match","text":"","code":"z <- SSBtools::SSBtoolsData(\"sprt_emp_withEU\") z$age[z$age == \"Y15-29\"] <- \"young\" z$age[z$age == \"Y30-64\"] <- \"old\" geoDimList <- SSBtools::FindDimLists(z[, c(\"geo\", \"eu\")], total = \"Europe\")[[1]]  mm1 <- SSBtools::ModelMatrix(z, list(age = \"All\", year = \"AllYears\", geo = \"Europe\"),                               crossTable = TRUE) mm2 <- SSBtools::ModelMatrix(z, formula = ~age * year * eu + geo * age, crossTable = TRUE) mm3 <- SSBtools::ModelMatrix(z, dimVar = 1:2, crossTable = TRUE)   tot_code1 <- find_tot_code(mm1$modelMatrix, mm1$crossTable) tot_code2 <- find_tot_code(mm2$modelMatrix, mm2$crossTable) tot_code3 <- find_tot_code(mm3$modelMatrix, mm3$crossTable)  mm1$crossTable[tot_code_selection(mm1$crossTable, tot_code1), ] #>   age     year    geo #> 1 All AllYears Europe mm1$crossTable[tot_code_selection(mm1$crossTable, tot_code1[c(1, 3)]), ] #>    age     year    geo #> 1  All AllYears Europe #> 5  All     2014 Europe #> 9  All     2015 Europe #> 13 All     2016 Europe mm2$crossTable[tot_code_selection(mm2$crossTable, tot_code2[c(1, 2)]), ] #>      age  year      geo #> 1  Total Total    Total #> 7  Total Total       EU #> 8  Total Total    nonEU #> 9  Total Total  Iceland #> 10 Total Total Portugal #> 11 Total Total    Spain mm3$crossTable[tot_code_selection(mm3$crossTable, tot_code3[2]), ] #>     age   geo #> 1 Total Total #> 5   old Total #> 9 young Total  d <- mm1$crossTable d$value <- 10 * 1:(nrow(d))  cbind(d, tot_code_replace(d, dim_var = c(\"age\", \"year\", \"geo\"), tot_code1[c(2, 3)])) #>      age     year      geo value value istot #> 1    All AllYears   Europe    10    10  TRUE #> 2    All AllYears  Iceland    20    10 FALSE #> 3    All AllYears Portugal    30    10 FALSE #> 4    All AllYears    Spain    40    10 FALSE #> 5    All     2014   Europe    50    10 FALSE #> 6    All     2014  Iceland    60    10 FALSE #> 7    All     2014 Portugal    70    10 FALSE #> 8    All     2014    Spain    80    10 FALSE #> 9    All     2015   Europe    90    10 FALSE #> 10   All     2015  Iceland   100    10 FALSE #> 11   All     2015 Portugal   110    10 FALSE #> 12   All     2015    Spain   120    10 FALSE #> 13   All     2016   Europe   130    10 FALSE #> 14   All     2016  Iceland   140    10 FALSE #> 15   All     2016 Portugal   150    10 FALSE #> 16   All     2016    Spain   160    10 FALSE #> 17   old AllYears   Europe   170   170  TRUE #> 18   old AllYears  Iceland   180   170 FALSE #> 19   old AllYears Portugal   190   170 FALSE #> 20   old AllYears    Spain   200   170 FALSE #> 21   old     2014   Europe   210   170 FALSE #> 22   old     2014  Iceland   220   170 FALSE #> 23   old     2014 Portugal   230   170 FALSE #> 24   old     2014    Spain   240   170 FALSE #> 25   old     2015   Europe   250   170 FALSE #> 26   old     2015  Iceland   260   170 FALSE #> 27   old     2015 Portugal   270   170 FALSE #> 28   old     2015    Spain   280   170 FALSE #> 29   old     2016   Europe   290   170 FALSE #> 30   old     2016  Iceland   300   170 FALSE #> 31   old     2016 Portugal   310   170 FALSE #> 32   old     2016    Spain   320   170 FALSE #> 33 young AllYears   Europe   330   330  TRUE #> 34 young AllYears  Iceland   340   330 FALSE #> 35 young AllYears Portugal   350   330 FALSE #> 36 young AllYears    Spain   360   330 FALSE #> 37 young     2014   Europe   370   330 FALSE #> 38 young     2014  Iceland   380   330 FALSE #> 39 young     2014 Portugal   390   330 FALSE #> 40 young     2014    Spain   400   330 FALSE #> 41 young     2015   Europe   410   330 FALSE #> 42 young     2015  Iceland   420   330 FALSE #> 43 young     2015 Portugal   430   330 FALSE #> 44 young     2015    Spain   440   330 FALSE #> 45 young     2016   Europe   450   330 FALSE #> 46 young     2016  Iceland   460   330 FALSE #> 47 young     2016 Portugal   470   330 FALSE #> 48 young     2016    Spain   480   330 FALSE cbind(d, tot_code_replace(d, dim_var = c(\"age\", \"year\", \"geo\"), tot_code1[1])) #>      age     year      geo value value istot #> 1    All AllYears   Europe    10    10  TRUE #> 2    All AllYears  Iceland    20    20  TRUE #> 3    All AllYears Portugal    30    30  TRUE #> 4    All AllYears    Spain    40    40  TRUE #> 5    All     2014   Europe    50    50  TRUE #> 6    All     2014  Iceland    60    60  TRUE #> 7    All     2014 Portugal    70    70  TRUE #> 8    All     2014    Spain    80    80  TRUE #> 9    All     2015   Europe    90    90  TRUE #> 10   All     2015  Iceland   100   100  TRUE #> 11   All     2015 Portugal   110   110  TRUE #> 12   All     2015    Spain   120   120  TRUE #> 13   All     2016   Europe   130   130  TRUE #> 14   All     2016  Iceland   140   140  TRUE #> 15   All     2016 Portugal   150   150  TRUE #> 16   All     2016    Spain   160   160  TRUE #> 17   old AllYears   Europe   170    10 FALSE #> 18   old AllYears  Iceland   180    20 FALSE #> 19   old AllYears Portugal   190    30 FALSE #> 20   old AllYears    Spain   200    40 FALSE #> 21   old     2014   Europe   210    50 FALSE #> 22   old     2014  Iceland   220    60 FALSE #> 23   old     2014 Portugal   230    70 FALSE #> 24   old     2014    Spain   240    80 FALSE #> 25   old     2015   Europe   250    90 FALSE #> 26   old     2015  Iceland   260   100 FALSE #> 27   old     2015 Portugal   270   110 FALSE #> 28   old     2015    Spain   280   120 FALSE #> 29   old     2016   Europe   290   130 FALSE #> 30   old     2016  Iceland   300   140 FALSE #> 31   old     2016 Portugal   310   150 FALSE #> 32   old     2016    Spain   320   160 FALSE #> 33 young AllYears   Europe   330    10 FALSE #> 34 young AllYears  Iceland   340    20 FALSE #> 35 young AllYears Portugal   350    30 FALSE #> 36 young AllYears    Spain   360    40 FALSE #> 37 young     2014   Europe   370    50 FALSE #> 38 young     2014  Iceland   380    60 FALSE #> 39 young     2014 Portugal   390    70 FALSE #> 40 young     2014    Spain   400    80 FALSE #> 41 young     2015   Europe   410    90 FALSE #> 42 young     2015  Iceland   420   100 FALSE #> 43 young     2015 Portugal   430   110 FALSE #> 44 young     2015    Spain   440   120 FALSE #> 45 young     2016   Europe   450   130 FALSE #> 46 young     2016  Iceland   460   140 FALSE #> 47 young     2016 Portugal   470   150 FALSE #> 48 young     2016    Spain   480   160 FALSE   ma <- tot_code_match(mm3$crossTable, mm1$crossTable, tot_code3, tot_code1)  # Like koder kreves for match. Må altså ha samme total-koder. Det er det ikke her. cbind(mm3$crossTable[!is.na(ma), ], mm1$crossTable[ma[!is.na(ma)], ])  #>      age      geo   age     year      geo #> 6    old  Iceland   old AllYears  Iceland #> 7    old Portugal   old AllYears Portugal #> 8    old    Spain   old AllYears    Spain #> 10 young  Iceland young AllYears  Iceland #> 11 young Portugal young AllYears Portugal #> 12 young    Spain young AllYears    Spain"},{"path":"/reference/tot_code_replace.html","id":null,"dir":"Reference","previous_headings":"","what":"tot_code_replace — tot_code_replace","title":"tot_code_replace — tot_code_replace","text":"tot_code_replace","code":""},{"path":"/reference/tot_code_replace.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tot_code_replace — tot_code_replace","text":"","code":"tot_code_replace(   data,   dim_var,   tot_code,   replaced_only = TRUE,   include_istot = TRUE )"},{"path":"/reference/tot_code_replace.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tot_code_replace — tot_code_replace","text":"data data dim_var dim_var tot_code tot_code","code":""},{"path":"/reference/tot_code_replace.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"tot_code_replace — tot_code_replace","text":"data frame","code":""},{"path":"/reference/tot_code_selection.html","id":null,"dir":"Reference","previous_headings":"","what":"tot_code_selection — tot_code_selection","title":"tot_code_selection — tot_code_selection","text":"tot_code_selection","code":""},{"path":"/reference/tot_code_selection.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tot_code_selection — tot_code_selection","text":"","code":"tot_code_selection(   x,   x_tot_code = { k <- as.list(rep(\"Total\", ncol(x))) names(k) <- names(x)          k  } )"},{"path":"/reference/tot_code_selection.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tot_code_selection — tot_code_selection","text":"x x x_tot_code x_tot_code","code":""},{"path":"/reference/tot_code_selection.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"tot_code_selection — tot_code_selection","text":"logical vector","code":""}]
